<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Plan de adelgazamiento ‚Äì 8 semanas</title>
<script src="https://cdn.tailwindcss.com"></script>
<style>
 @media print {
 body { -webkit-print-color-adjust: exact; }
 .no-print { display: none; }
 table { page-break-inside: avoid; }
 td, th { font-size: 10pt; }
 }
</style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-green-50 text-gray-800 min-h-screen">
<div class="mx-auto max-w-7xl p-6">

<div class="text-center mb-6">
 <h1 class="text-4xl font-bold mb-2 text-blue-800">Plan de adelgazamiento</h1>
 <p class="text-xl text-gray-600">8 semanas de nutrici√≥n balanceada</p>
 <div class="mt-2 p-2 bg-blue-100 rounded-lg inline-block">
  <span class="text-sm font-medium">üìä Objetivo diario: ~1200 kcal</span>
 </div>
</div>

<!-- Botones de navegaci√≥n mejorados -->
<div class="flex flex-wrap gap-2 mb-6 no-print justify-center">
 <button onclick="window.print()" class="px-4 py-2 border rounded-lg bg-green-500 text-white hover:bg-green-600 shadow-md transition-all duration-200 hover:shadow-lg">üñ®Ô∏è Imprimir / PDF</button>
 <button onclick="showAllWeeks()" class="px-4 py-2 border rounded-lg bg-purple-500 text-white hover:bg-purple-600 shadow-md transition-all duration-200 hover:shadow-lg">üëÅÔ∏è Ver todas</button>
 <div class="w-full md:w-auto"></div>
 <button id="btn-0" class="week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200" onclick="showWeek(0)">Semana 1</button>
 <button id="btn-1" class="week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200" onclick="showWeek(1)">Semana 2</button>
 <button id="btn-2" class="week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200" onclick="showWeek(2)">Semana 3</button>
 <button id="btn-3" class="week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200" onclick="showWeek(3)">Semana 4</button>
 <button id="btn-4" class="week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200" onclick="showWeek(4)">Semana 5</button>
 <button id="btn-5" class="week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200" onclick="showWeek(5)">Semana 6</button>
 <button id="btn-6" class="week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200" onclick="showWeek(6)">Semana 7</button>
 <button id="btn-7" class="week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200" onclick="showWeek(7)">Semana 8</button>
</div>

<!-- Secci√≥n de comidas fijas con mejor dise√±o -->
<div class="mb-6 bg-white border-2 border-blue-200 rounded-xl shadow-lg">
 <button 
   onclick="toggleFixedMeals()" 
   class="w-full p-4 text-left flex items-center justify-between bg-gradient-to-r from-blue-100 to-blue-200 hover:from-blue-200 hover:to-blue-300 rounded-t-xl transition-all duration-200 cursor-pointer no-print">
   <span class="text-lg font-semibold text-blue-800">üìã Comidas fijas diarias (Desayuno, Media ma√±ana, Merienda) - 550 kcal</span>
   <span id="toggle-icon" class="text-xl font-bold text-blue-600">‚ñº</span>
 </button>
 
 <div id="fixed-meals-content" class="grid grid-cols-1 md:grid-cols-3 gap-4 p-6">
   <div class="p-4 border-2 border-orange-200 rounded-lg shadow-sm bg-gradient-to-b from-orange-50 to-orange-100">
     <h3 class="flex items-center gap-2 text-base mb-3 font-semibold text-orange-800">ü•õ Desayuno (~300 kcal)</h3>
     <ul class="list-disc pl-4 text-sm space-y-2">
       <li>Leche desnatada 200 ml <span class="text-orange-600 font-medium">(70 kcal)</span></li>
       <li>Pan integral 40 g <span class="text-orange-600 font-medium">(105 kcal)</span></li>
       <li>Queso light 30 g <span class="text-orange-600 font-medium">(45 kcal)</span> o pavo 30 g <span class="text-orange-600 font-medium">(30 kcal)</span></li>
       <li>Caf√© solo <span class="text-orange-600 font-medium">0 kcal</span></li>
     </ul>
   </div>
   <div class="p-4 border-2 border-green-200 rounded-lg shadow-sm bg-gradient-to-b from-green-50 to-green-100">
     <h3 class="flex items-center gap-2 text-base mb-3 font-semibold text-green-800">üçé Media ma√±ana (~100 kcal)</h3>
     <ul class="list-disc pl-4 text-sm space-y-2">
       <li>Fruta: manzana 1 pieza <span class="text-green-600 font-medium">(80 kcal)</span></li>
     </ul>
   </div>
   <div class="p-4 border-2 border-purple-200 rounded-lg shadow-sm bg-gradient-to-b from-purple-50 to-purple-100">
     <h3 class="flex items-center gap-2 text-base mb-3 font-semibold text-purple-800">ü•§ Merienda (~150 kcal)</h3>
     <ul class="list-disc pl-4 text-sm space-y-2">
       <li>Leche desnatada 150 ml <span class="text-purple-600 font-medium">(52 kcal)</span></li>
       <li>Fruta: pl√°tano 1 pieza <span class="text-purple-600 font-medium">(100 kcal)</span></li>
     </ul>
   </div>
 </div>
</div>

<!-- Indicador de progreso -->
<div id="progress-indicator" class="mb-6 no-print">
 <div class="bg-white rounded-lg p-4 shadow-md border">
   <div class="flex items-center justify-between mb-2">
     <span class="text-sm font-medium text-gray-700">Progreso del plan</span>
     <span id="progress-text" class="text-sm text-blue-600 font-semibold">Semana 1 de 8</span>
   </div>
   <div class="w-full bg-gray-200 rounded-full h-3">
     <div id="progress-bar" class="bg-gradient-to-r from-blue-400 to-blue-600 h-3 rounded-full transition-all duration-500" style="width: 12.5%"></div>
   </div>
 </div>
</div>

<!-- Consejos nutricionales -->
<div id="nutrition-tips" class="mb-6 bg-gradient-to-r from-yellow-50 to-orange-50 border-l-4 border-yellow-400 p-4 rounded-r-lg shadow-sm no-print">
 <h3 class="text-lg font-semibold text-yellow-800 mb-2">üí° Consejos para esta semana</h3>
 <p id="weekly-tip" class="text-yellow-700 text-sm"></p>
</div>

<!-- Contenedor de tablas -->
<div id="weeks-container"></div>

<!-- Bot√≥n flotante para navegaci√≥n r√°pida -->
<div id="floating-nav" class="fixed bottom-6 right-6 no-print">
 <button onclick="showPrevWeek()" class="mb-2 w-12 h-12 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition-all duration-200 hover:scale-110">‚Üê</button>
 <button onclick="showNextWeek()" class="w-12 h-12 bg-blue-500 text-white rounded-full shadow-lg hover:bg-blue-600 transition-all duration-200 hover:scale-110">‚Üí</button>
</div>

</div>

<script>
const DAYS = ["lunes", "martes", "mi√©rcoles", "jueves", "viernes", "s√°bado", "domingo"];
const DAY_LABELS = ["Lunes", "Martes", "Mi√©rcoles", "Jueves", "Viernes", "S√°bado", "Domingo"];
const PLACEHOLDER = ["‚Äî"];

// Calor√≠as fijas de desayuno, media ma√±ana y merienda
const BREAKFAST_KCAL = 300;
const MID_MORNING_KCAL = 100;
const SNACK_KCAL = 150;

// Variable para controlar si las comidas fijas est√°n expandidas
let fixedMealsExpanded = true;
let showingAllWeeks = false;

// Consejos semanales
const WEEKLY_TIPS = [
 "Primera semana: Conc√©ntrate en adaptarte a las porciones. Bebe mucha agua entre comidas.",
 "Segunda semana: Tu cuerpo se est√° adaptando. Es normal sentir algo de hambre inicial.",
 "Tercera semana: ¬°Genial! Ya llevas 3 semanas. Nota c√≥mo mejora tu energ√≠a durante el d√≠a.",
 "Cuarta semana: Mes completo. Revisa tu progreso y celebra los peque√±os logros.",
 "Quinta semana: Punto medio del plan. Mant√©n la motivaci√≥n y la constancia.",
 "Sexta semana: Tu metabolismo se est√° optimizando. Los resultados son m√°s evidentes.",
 "S√©ptima semana: Pen√∫ltima semana. Piensa en c√≥mo mantener estos h√°bitos a largo plazo.",
 "Octava semana: ¬°√öltima semana! Has creado h√°bitos saludables que durar√°n."
];

// Funci√≥n para contraer/expandir las comidas fijas
function toggleFixedMeals() {
 const content = document.getElementById('fixed-meals-content');
 const icon = document.getElementById('toggle-icon');
 
 if (fixedMealsExpanded) {
   content.style.display = 'none';
   icon.textContent = '‚ñ∂';
   fixedMealsExpanded = false;
 } else {
   content.style.display = 'grid';
   icon.textContent = '‚ñº';
   fixedMealsExpanded = true;
 }
}

// Funci√≥n para extraer kcal de un string
function extraKcal(item){
 const match = item.match(/\((\d+)\s*kcal\)/i);
 return match ? parseInt(match[1]) : 0;
}

// Datos de las 8 semanas (mismo contenido que tu original)
const WEEKS = [
 {
 title:"Semana 1",
comida:{
 lunes:["Patata al horno 200g (160 kcal)","Pollo 120g (200 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Verduras 150g (50 kcal)"],
 martes:["Alubias cocidas 200g (180 kcal)","At√∫n natural 1 lata (120 kcal)","Queso fresco 50g (60 kcal)","Ensalada (lechuga, medio tomate, 1/4 cebolla) 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 mi√©rcoles:["Ensalada (lechuga, medio tomate, 1/4 cebolla) 150g (60 kcal)","Ma√≠z 15g (tres cucharadas) (15 kcal)","Hamburguesa de ternera frisona LIDL 150g (302 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Menestra frisona lidl Verduras con habitas baby 200g (113 kcal)"],
 jueves:["Garbanzos cocidos 200g (180 kcal)","Langostinos 100g (90 kcal)","Ensalada (lechuga, medio tomate, 1/4 cebolla) 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 viernes:["media Lasa√±a bolognesa 350g mercadona (500 kcal)","Esp√°rragos blancos 150g (50 kcal)"],
 s√°bado:["Caldo de verduras 250g (80 kcal)","Merluza argentina Hacendado  150g (135 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Arroz 60g (210 kcal)"],
 domingo:["Ensalada (lechuga, medio tomate, 1/4 cebolla) 150g (60 kcal)","Ma√≠z 15g (tres cucharadas) (15 kcal)","Hamburguesa de ternera 120g (210 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Brocoli fresnona LIDL 150g (60 kcal)"]
},
cena:{
 lunes:["Ensalada (lechuga 50 gr,  tomate 75 gr, cebolla 25 gr) 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Jam√≥n cocido o lata atun natural 50g (60 kcal)","huevo cocido 50gr (70 kcal)"],
 martes:["Jud√≠as verdes 150g (50 kcal)","Brocheta de pollo 120g (210 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 mi√©rcoles:["Pescado guisado 120g (210 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Verduras 150g (50 kcal)"],
 jueves:["Crema de verduras Kania LIDL 250ml (150 kcal)","Huevo a la plancha  (80 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 viernes:["Can√≥nigos 100g (50 kcal)","Pollo asado 120g (210 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:[" Ensalada (lechuga, medio tomate, 1/4 cebolla) 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Huevo a la plancha  (80 kcal)","Jam√≥n cocido 30g (40 kcal)"],
 domingo:["Pescado guisado 120g (210 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Verduras 150g (50 kcal)"]
}
},
{
title:"Semana 2",
comida:{
 lunes:["Sopa de verduras 250g (120 kcal)","Fideos 70g (260 kcal)","Pollo 100g (165 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 martes:["Arroz con tomate 150g (180 kcal)","Huevo 60g (90 kcal)","Pimientos al horno 100g (40 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 mi√©rcoles:["Sopa de verduras 250g (120 kcal)","Fideos 70g (260 kcal)","Pollo 100g (165 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 jueves:["Garbanzos con acelga 150g (210 kcal)","Pescado 100g (120 kcal)","Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 viernes:["Tortilla de patata de 2 huevos= 150 kcal + 200gr patata= 160Kcal (310 kcal)","Verduras 100g (40 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:["Guisantes con jam√≥n 150g (180 kcal)","Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 domingo:["Lentejas 150g (180 kcal)","Ternera 100g (210 kcal)","Berenjenas 100g (40 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
},
cena:{
 lunes:["Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Palitos de cangrejo 50g (75 kcal)","At√∫n natural 1 lata (120 kcal)"],
 martes:["Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Pollo 100g (165 kcal)"],
 mi√©rcoles:["Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Palitos de cangrejo 50g (75 kcal)","At√∫n natural 1 lata (120 kcal)"],
 jueves:["Tomate 100g (20 kcal)","Lomo de cerdo 100g (200 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 viernes:["Sopa juliana 250g (120 kcal)","Pollo 100g (165 kcal)","Jam√≥n 30g (70 kcal)","Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:["Menestra 200g (150 kcal)","Pescado blanco 100g (120 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 domingo:["Ensalada 150g (60 kcal)","Huevo 1 ud (70 kcal)","Queso fresco 50g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
}
},
{
title:"Semana 3",
comida:{
 lunes:["Menestra 200g (150 kcal)","Pescado merluza 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 martes:["Alubias 80g (270 kcal)","Ternera 120g (250 kcal)","Pimientos 100g (50 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 mi√©rcoles:["Menestra 200g (150 kcal)","Pescado blanco 120g (160 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 jueves:["Macarrones medido en seco 80g (280 kcal)","Tomate frito 50g (40 kcal)","Pollo 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 viernes:["Patata cocida 150g (120 kcal)","Huevo a la plancha 100g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 s√°bado:["Arroz 80g (280 kcal)","3 delicias verduras 50g (40 kcal)","Ternera 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Tomate 100g (20 kcal)"],
 domingo:["Garbanzos 80g (270 kcal)","Verduras 100g (50 kcal)","Hamburguesa de pollo 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"]
},
cena:{
 lunes:["Crema de calabac√≠n 250g (80 kcal)","Tortilla de 2 huevos 100g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 martes:["Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Pescado 120g (120 kcal)"],
 mi√©rcoles:["Crema de calabac√≠n 250g (80 kcal)","Tortilla de 2 huevos 100g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 jueves:["Champi√±ones 100g (25 kcal)","Jam√≥n serrano 50g (120 kcal)"],
 viernes:["Sopa de verduras 250g (80 kcal)","Pollo 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:["Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Queso fresco 50g (50 kcal)","At√∫n 120g (140 kcal)"],
 domingo:["Revuelto de esp√°rragos verdes 150g (80 kcal)","Jam√≥n cocido 50g (70 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
}
},
{
title:"Semana 4",
comida:{
 lunes:["Sopa de verduras 250g (80 kcal)","Pollo 120g (160 kcal)","Fideos 80g (120 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 martes:["Alubias 80g (270 kcal)","Huevo escalfado 100g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 mi√©rcoles:["Menestra 200g (150 kcal)","Pescado blanco 120g (160 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 jueves:["Arroz 80g (280 kcal)","Hamburguesa ternera 120g (140 kcal)","Tomate 100g (40 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 viernes:["Sopa de verduras 250g (80 kcal)","Pollo 120g (160 kcal)","Fideos 80g (120 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 s√°bado:["Patata cocida 150g (120 kcal)","Huevo a la plancha 100g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 domingo:["Garbanzos 80g (270 kcal)","Espinacas freshona LIDL 100g (40 kcal)","Pescado blanco 120g (160 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"]
},
cena:{
 lunes:["Pimientos del piquillo 100g (25 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Bacalao 120g (120 kcal)"],
 martes:["2 huevos uds 100g (150 kcal)","Espinacas freshona LIDL 100g (40 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 mi√©rcoles:["Coliflor 150g (30 kcal)","Jam√≥n cocido 50g (80 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 jueves:["Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Lomo cerdo 120g (200 kcal)"],
 viernes:["Pimientos del piquillo 100g (25 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Bacalao 120g (120 kcal)"],
 s√°bado:["Esp√°rragos verdes 150g (25 kcal)","Gambas 100g (90 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 domingo:["Berenjenas a la plancha 150g (40 kcal)","Tortilla 1 huevo = 70 kcal con lata de at√∫n natural de 58 g= 60 kcal  (120 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
}
},
{
title:"Semana 5",
comida:{
 lunes:["Patata al horno 150g (120 kcal)","Pollo 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Verduras 100g (40 kcal)"],
 martes:["Alubias 80g (270 kcal)","Ternera 120g (200 kcal)","Esp√°rragos 100g (20 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 mi√©rcoles:["Sopa de verduras 250g (80 kcal)","Pollo 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 jueves:["Garbanzos 80g (270 kcal)","Langostinos 100g (90 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 viernes:["Ensalada de ma√≠z 150g (60 kcal)","Aguacate 50g (80 kcal)","Lomo adobado 120g (180 kcal)","Verduras 100g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:["Patata al horno 150g (120 kcal)","Pescado blanco 120g (160 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Verduras 100g (40 kcal)"],
 domingo:["Sopa de verduras 250g (80 kcal)","Pollo 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"]
},
cena:{
 lunes:["Tortilla calabac√≠n 100g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","At√∫n 120g (140 kcal)","Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)"],
 martes:["Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Queso fresco 50g (50 kcal)"],
 mi√©rcoles:["Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Pescado 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 jueves:["Coles de Bruselas 150g (40 kcal)","Tortilla de jam√≥n 100g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 viernes:["Champi√±ones 100g (25 kcal)","Pavo 100g (100 kcal)","Queso fresco 50g (50 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:["Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Huevo a la plancha 100g (150 kcal)","Queso fresco 50g (50 kcal)"],
 domingo:["Ensalada 150g (60 kcal)","Aguacate 50g (80 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Pescado 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
}
},
{
title:"Semana 6",
comida:{
 lunes:["Patata guisada 200g (160 kcal)","Merluza 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Verduras 150g (50 kcal)"],
 martes:["Arroz integral 60g (210 kcal)","Ternera 120g (210 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 100g (50 kcal)","Aguacate 50g (50 kcal)"],
 mi√©rcoles:["Tortilla de patata 2 huevos + 150g patata (320 kcal)","Ensalada 100g (50 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 jueves:["Patata guisada 200g (160 kcal)","Pescado 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Verduras 150g (50 kcal)"],
 viernes:["Crema de verduras 250g (120 kcal)","Cerdo adobado 120g (180 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 100g (50 kcal)"],
 s√°bado:["Lentejas 200g cocidas (180 kcal)","Tortilla 2 huevos (200 kcal)","Ensalada 100g (50 kcal)","Queso fresco 50g (50 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 domingo:["Ensalada de pasta 150g (220 kcal)","Gambas 100g (90 kcal)","At√∫n natural 1 lata (120 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
},
cena:{
 lunes:["Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Tortilla de jam√≥n 2 huevos + 30g jam√≥n (250 kcal)"],
 martes:["Tomate en rodajas 150g (30 kcal)","Salchicha de pollo 100g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 mi√©rcoles:["Pimientos asados 150g (50 kcal)","Bacalao 120g (120 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 jueves:["Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Tortilla de jam√≥n 2 huevos + 30g jam√≥n (250 kcal)"],
 viernes:["Caldo de verduras 250g (80 kcal)","Pollo 120g (150 kcal)","Verduras 150g (50 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:["Esp√°rragos blancos 150g (30 kcal)","Hamburguesa de ternera 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 domingo:["Verduras variadas 150g (50 kcal)","Pavo a la plancha 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
}
},
{
title:"Semana 7",
comida:{
 lunes:["Tortilla 2 huevos (200 kcal)","Patatas cocidas 200g (160 kcal)","Ensalada 100g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 martes:["Garbanzos cocidos 200g (180 kcal)","Langostinos 100g (90 kcal)","Ensalada 100g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 mi√©rcoles:["Ensalada de ma√≠z 100g (60 kcal)","Aguacate 50g (40 kcal)","Pescado a la plancha 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Pisto 150g (100 kcal)"],
 jueves:["Sopa de verduras 250g (80 kcal)","Arroz 60g (70 kcal)","Pollo 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 viernes:["Alubias cocidas 200g (180 kcal)","Pescado a la plancha 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Ensalada 100g (50 kcal)"],
 s√°bado:["Lasa√±a 150g (250 kcal)","Carne de ternera picada 120g (180 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Can√≥nigos 100g (50 kcal)"],
 domingo:["Ensalada de ma√≠z 100g (60 kcal)","Aguacate 50g (40 kcal)","Pescado a la plancha 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Pisto 150g (100 kcal)"]
},
cena:{
 lunes:["Champi√±ones 150g (50 kcal)","Ternera a la plancha 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 martes:["Tortilla de jam√≥n y at√∫n 2 huevos + 30g jam√≥n + 1 lata at√∫n (350 kcal)","R√∫cula 100g (20 kcal)"],
 mi√©rcoles:["Menestra 150g (120 kcal)","Hamburguesa de pollo 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 jueves:["Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Mejillones y gambas cocidas 120g (150 kcal)"],
 viernes:["Tortilla de calabac√≠n 2 huevos (200 kcal)","Jud√≠as verdes 150g (50 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:["Pescado guisado 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Verduras 150g (50 kcal)"],
 domingo:["Menestra 150g (120 kcal)","Hamburguesa de pollo 120g (150 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
}
},
{
title:"Semana 8",
comida:{
 lunes:["Sopa de verduras 250g (120 kcal)","Fideos 70g (260 kcal)","Pollo 100g (165 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 martes:["Arroz con tomate 150g (180 kcal)","Huevo 60g (90 kcal)","Pimientos al horno 100g (40 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 mi√©rcoles:["Sopa de verduras 250g (120 kcal)","Fideos 70g (260 kcal)","Pollo 100g (165 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 jueves:["Garbanzos con acelga 150g (210 kcal)","Pescado 100g (120 kcal)","Ensalada (lechuga, medio tomate, 1/4 cebolla) 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 viernes:["Tortilla de patata 150g (220 kcal)","Patatas cocidas 150g (120 kcal)","Verduras 100g (40 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:["Guisantes con jam√≥n 150g (180 kcal)","Ensalada (lechuga, medio tomate, 1/4 cebolla) 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 domingo:["Lentejas 150g (180 kcal)","Ternera 100g (210 kcal)","Berenjenas 100g (40 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
},
cena:{
 lunes:["Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Palitos de cangrejo 50g (75 kcal)","At√∫n natural 1 lata (120 kcal)"],
 martes:["Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Pollo 100g (165 kcal)"],
 mi√©rcoles:["Ensalada 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)","Palitos de cangrejo 50g (75 kcal)","At√∫n natural 1 lata (120 kcal)"],
 jueves:["Tomate 100g (20 kcal)","Lomo de cerdo 100g (200 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 viernes:["Sopa juliana 250g (120 kcal)","Pollo 100g (165 kcal)","Jam√≥n 30g (70 kcal)","Ensalada (lechuga, medio tomate, 1/4 cebolla) 150g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 s√°bado:["Menestra 200g (150 kcal)","Pescado blanco 100g (120 kcal)","Cucharada sopera Aceite 10g (90 kcal)"],
 domingo:["Ensalada 150g (60 kcal)","Huevo 1 pieza (70 kcal)","Queso fresco 50g (60 kcal)","Cucharada sopera Aceite 10g (90 kcal)"]
}
}
];

// Variable para rastrear el bot√≥n activo
let activeWeekIndex = 0;

// Funci√≥n para actualizar el consejo semanal
function updateWeeklyTip(weekIndex) {
 const tipElement = document.getElementById('weekly-tip');
 if (tipElement) {
   tipElement.textContent = WEEKLY_TIPS[weekIndex];
 }
}

// Funci√≥n para actualizar la barra de progreso
function updateProgress(weekIndex) {
 const progressBar = document.getElementById('progress-bar');
 const progressText = document.getElementById('progress-text');
 
 if (progressBar && progressText) {
   const percentage = ((weekIndex + 1) / 8) * 100;
   progressBar.style.width = percentage + '%';
   progressText.textContent = `Semana ${weekIndex + 1} de 8`;
 }
}

// Funci√≥n para actualizar el estilo de los botones
function updateActiveButton(newActiveIndex) {
 // Remover estilos activos del bot√≥n anterior
 const prevBtn = document.getElementById(`btn-${activeWeekIndex}`);
 if (prevBtn) {
   prevBtn.className = "week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200";
 }
 
 // A√±adir estilos activos al nuevo bot√≥n
 const newBtn = document.getElementById(`btn-${newActiveIndex}`);
 if (newBtn) {
   newBtn.className = "week-btn px-4 py-2 border rounded-lg bg-orange-500 text-white hover:bg-orange-600 shadow-lg ring-2 ring-orange-300 transform scale-105 transition-all duration-200";
 }
 
 // Actualizar el √≠ndice activo
 activeWeekIndex = newActiveIndex;
}

// Funci√≥n para mostrar solo la semana seleccionada
function showWeek(index){
 showingAllWeeks = false;
 WEEKS.forEach((_, i)=>{
   document.getElementById("week-"+i).classList.add("hidden");
 });
 document.getElementById("week-"+index).classList.remove("hidden");
 
 // Actualizar el bot√≥n activo, progreso y consejo
 updateActiveButton(index);
 updateProgress(index);
 updateWeeklyTip(index);
}

// Funci√≥n para mostrar todas las semanas
function showAllWeeks(){
 showingAllWeeks = true;
 WEEKS.forEach((_, i)=>{
   document.getElementById("week-"+i).classList.remove("hidden");
 });
 
 // Resetear estilos de botones
 WEEKS.forEach((_, i)=>{
   const btn = document.getElementById(`btn-${i}`);
   if (btn) {
     btn.className = "week-btn px-4 py-2 border rounded-lg bg-blue-500 text-white hover:bg-blue-600 shadow-md transition-all duration-200";
   }
 });
 
 // Ocultar indicadores espec√≠ficos de semana
 const progressIndicator = document.getElementById('progress-indicator');
 const nutritionTips = document.getElementById('nutrition-tips');
 if (progressIndicator) progressIndicator.style.display = 'none';
 if (nutritionTips) nutritionTips.style.display = 'none';
}

// Funciones de navegaci√≥n r√°pida
function showNextWeek() {
 if (showingAllWeeks) return;
 const nextWeek = (activeWeekIndex + 1) % 8;
 showWeek(nextWeek);
}

function showPrevWeek() {
 if (showingAllWeeks) return;
 const prevWeek = activeWeekIndex === 0 ? 7 : activeWeekIndex - 1;
 showWeek(prevWeek);
}

// Generar tablas y calcular kcal por d√≠a
const container = document.getElementById("weeks-container");

WEEKS.forEach((week, i) => {
 const table = document.createElement("table");
 table.id = "week-" + i;
 table.className = "min-w-full border-collapse mb-8 text-xs sm:text-sm border hidden bg-white rounded-lg shadow-lg overflow-hidden";

 // Generar filas de comida y cena con mejor estilo
 const rowsHtml = ["comida", "cena"].map((meal, mealIndex) => {
   const bgColor = mealIndex === 0 ? "bg-blue-50" : "bg-green-50";
   const textColor = mealIndex === 0 ? "text-blue-800" : "text-green-800";
   const emoji = mealIndex === 0 ? "üçΩÔ∏è" : "üåô";
   
   return `<tr class="border-t ${bgColor}">
     <th class="p-3 text-left sticky left-0 ${bgColor} ${textColor} font-semibold">
       ${emoji} ${meal.charAt(0).toUpperCase() + meal.slice(1)}
     </th>
     ${DAYS.map(day => {
       const items = week[meal][day] || PLACEHOLDER;
       return `<td class="p-3 align-top">
         ${items.map(i => {
           const kcal = extraKcal(i);
           const kcalColor = kcal > 200 ? 'text-red-600' : kcal > 100 ? 'text-orange-600' : 'text-green-600';
           return `<span class="inline-block bg-white border rounded-full px-3 py-1 mb-2 text-xs shadow-sm hover:shadow-md transition-shadow duration-200">
             ${i.replace(/\(\d+\s*kcal\)/i, '')}
             <span class="${kcalColor} font-semibold">(${kcal} kcal)</span>
           </span>`;
         }).join("<br>")}
       </td>`;
     }).join("")}
   </tr>`;
 }).join("");

 // Calcular total kcal por d√≠a con mejor visualizaci√≥n
 let totalKcalRow = `<tr class="border-t bg-gradient-to-r from-yellow-100 to-orange-100 font-bold">
   <th class="p-3 text-left sticky left-0 bg-gradient-to-r from-yellow-100 to-orange-100 text-yellow-800">
     üìä Total kcal/d√≠a
   </th>`;
 
 let weeklyTotal = 0;
 DAYS.forEach(day => {
   const comidaKcal = week.comida[day].reduce((sum, i) => sum + extraKcal(i), 0);
   const cenaKcal = week.cena[day].reduce((sum, i) => sum + extraKcal(i), 0);
   const totalDia = comidaKcal + cenaKcal + BREAKFAST_KCAL + MID_MORNING_KCAL + SNACK_KCAL;
   weeklyTotal += totalDia;
   
   const colorClass = totalDia > 1300 ? 'text-red-600' : totalDia < 1100 ? 'text-blue-600' : 'text-green-600';
   totalKcalRow += `<td class="p-3 align-top ${colorClass} text-center font-bold">${totalDia} kcal</td>`;
 });
 totalKcalRow += "</tr>";
 
 // A√±adir fila con promedio semanal
 const avgDaily = Math.round(weeklyTotal / 7);
 const avgRow = `<tr class="bg-gray-100 font-semibold text-gray-700">
   <th class="p-3 text-left sticky left-0 bg-gray-100">üìà Promedio semanal</th>
   <td colspan="7" class="p-3 text-center">${avgDaily} kcal/d√≠a (Total semanal: ${weeklyTotal} kcal)</td>
 </tr>`;

 // Generar tabla completa con mejor header
 table.innerHTML = `
   <thead class="bg-gradient-to-r from-blue-600 to-blue-700 text-white">
     <tr>
       <th class="p-4 text-left sticky left-0 bg-gradient-to-r from-blue-600 to-blue-700 text-lg font-bold">
         üóìÔ∏è ${week.title}
       </th>
       ${DAY_LABELS.map(d => `<th class="p-4 text-center font-semibold">${d}</th>`).join("")}
     </tr>
   </thead>
   <tbody>
     ${rowsHtml}
     ${totalKcalRow}
     ${avgRow}
   </tbody>
 `;

 container.appendChild(table);
});

// Inicializar la aplicaci√≥n
document.addEventListener('DOMContentLoaded', function() {
 // Mostrar la primera semana al cargar
 showWeek(0);
 
 // Agregar atajos de teclado
 document.addEventListener('keydown', function(e) {
   if (showingAllWeeks) return;
   
   if (e.key === 'ArrowLeft') {
     e.preventDefault();
     showPrevWeek();
   } else if (e.key === 'ArrowRight') {
     e.preventDefault();
     showNextWeek();
   } else if (e.key >= '1' && e.key <= '8') {
     e.preventDefault();
     showWeek(parseInt(e.key) - 1);
   }
 });
});

</script>
</body>
</html>
